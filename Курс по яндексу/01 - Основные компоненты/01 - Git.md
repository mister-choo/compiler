# Зачем нужен Git

Создавая ядро Linux, Линус Торвальдс выдвинул идею устройства Git — системы управления версиями кода. Сленговое слово “git” можно перевести как «невежественный мерзавец». Но Торвальдс предлагает считать “git” аббревиатурой с двумя вариантами расшифровки:

-   Global information tracker (англ. «глобальный информационный трекер»), когда всё работает;
-   Goddamn idiotic truckload of s_____**_____ (англ. «чёртов идиотский грузовик с д_**_ом»), когда всё плохо.

Существуют и другие системы версионного контроля: Subversion, Team Foundation Server, Mercurial. Но Git — самая популярная. Согласно [исследованию](https://insights.stackoverflow.com/survey/2017#work-version-control) Stack Overflow, более 70% разработчиков используют Git. Разберёмся, зачем.

### Командная работа

Обычно программисты трудятся над проектом в команде. С Git каждый разработчик может писать часть кода, не мешая остальным, и давать доступ к своему коду при необходимости.

### Разрешение конфликтов

Иногда над одной программой работают два человека. Git автоматически сравнит их код и позволит выбрать оптимальный вариант или объединить удачные решения.

### Контроль версий

Допустим, вы сделали проект для заказчика. Проект работает, но заказчик просит переработать часть функционала. Вы вносите изменения и на время забываете об этом. Через месяц заказчик пишет, что хотел бы вернуть всё как было. Писать старый код заново не придётся — Git сохраняет разные версии кода по мере работы над ними. Именно поэтому Git называют системой контроля версий.

Git — это программа. В следующем уроке мы её установим и настроим.

### Настройка Git

Если работаете на macOS или Linux, запустите Терминал. Если на Windows — Git Bash. Укажите своё имя и адрес электронной почты. Для этого в командной строке введите команду `git config` с опцией `global`. Свои данные укажите как значения `user.name` и `user.email`. Лучше использовать настоящее имя — пригодится для работы:

Скопировать кодBASH

`git config --global user.name "Stas Basov" 
# вводите своё имя латиницей и в кавычках

git config --global user.email stasbasov@yandex.ru
# здесь нужно ввести свой реальный e-mail` 

Проверьте, что получилось: выполните команду `git config` с опцией `--list`:

Скопировать кодBASH

`git config --list
# вывели в окно командной строки список всех свойств конфига` 

Командная строка покажет ваши настройки:

Скопировать кодBASH

`user.name=Stas Basov
user.email=stasbasov@yandex.ru` 

Пользователям macOS и Linux нужно будет выйти из просмотра файла нажатием клавиши Q (сработает при включённой латинской раскладке).

Когда нужно просмотреть или изменить настройки Git, неважно, в какой директории вы находитесь в командной строке. Вызов `git config--global` сработает отовсюду.

### Подключение Git к проекту

Чтобы Git начал работать в проекте, папку с этим проектом нужно сделать Git-репозиторием. Так Git начнёт отслеживать все изменения внутри директории.

Перейдите в папку с проектом и введите команду:

Скопировать кодBASH

`git init` 

Командная строка сообщит, что репозиторий инициализирован.

Сейчас ваш проект ещё не под версионным контролем. В следующем уроке узнаете, как это исправить.

# Работа с файлами в Git: status, add, commit

Версионный контроль в Git предполагает, что любой файл репозитория находится в одном из четырёх состояний:

1.  Неотслеживаемый (англ. untracked);
2.  Отслеживаемый (англ. staged) — добавленный в Staging Area. Иначе в Git это называют «добавленный в индекс»;
3.  Изменённый (англ. modified);
4.  Боевой, или закоммиченный (от англ. committed, «брошенный в бой»).

![image](https://pictures.s3.yandex.net/resources/sprint_10___1__243_1598554242.png)

Каждый новый файл в репозитории принимает состояние «неотслеживаемый». Git проигнорирует любые изменения, которые вы внесёте в файл.

Чтобы Git обратил внимание на файл и стал учитывать изменения, добавите файл в индекс. Это делается командой `git add`. Файл перейдёт в состояние «отслеживаемый», а если после этого внести в него изменения, — в состояние «изменённый».

После завершения работы с файлом сохраните его текущее состояние. Сохранение выполняется командой `git commit` и называется «коммит». Так Git поймёт, что актуальное состояние файла надо запомнить. Рабочие файлы будут коммититься много раз. Вернуться вы сможете к любой сохранённой версии.

Рассмотрим метаморфозы файла в Git внимательнее.

### «Неотслеживаемый» файл

Чтобы узнать состояние файлов в репозитории, перейдите в папку с проектом и выполните команду `git status`. Вы увидите такое сообщение:
```bash
Скопировать кодBASH

`# ввели команду для отображения состояния репозитория
git status
# вот что Git сообщает в ответ
On branch master
No commits yet
Modified files:
  (use "git add <file>..." to include in what will be committed)
  program.cpp

nothing added to commit but untracked files present (use "git add" to track)` 
```
Git видит файлы, но они не добавлены в Staging Area. Значит сохранять их текущую версию Git не станет. Файлы в статусе «изменённый» выделены красным. В скобках — совет добавить файлы в индекс командой `git add`, чтобы сохранить изменения в коммите:

Скопировать кодBASH

`(use "git add <file>..." to include in what will be committed)` 

### Добавление файла в индекс

Последуем совету и добавим файлы в индекс, то есть сделаем их отслеживаемыми. Для этого используем команду `git add`. После команды укажем имя файла, судьбу которого Git должен отслеживать: `git add название_файла`.

Вы можете добавить все неотслеживаемые файлы сразу опцией `--all`. Файлы из вложенных каталогов также добавятся в индекс:

`git add --all`

Опцию **--all** можно заменить точкой: `git add .`
```bash
Скопировать кодBASH

`# добавили файл "program.cpp"
git add program.cpp

# добавили все файлы
git add --all

# добавили все файлы
git add .` 

Проверим, как изменился репозиторий:

Скопировать кодBASH

`git status

On branch master
No commits yet
Changes to be committed: # файлы ожидают коммита
  (use "git rm --cached <file>..." to unstage)
  new file:   program.cpp` 

Файл `program.cpp` добавлен в индекс и готов к коммиту. Файлы в текущей директории теперь имеют статус "new file".

Снова совет от `git status`: командой `git rm --cached <file>` вы можете перевести файл в состояние «неотслеживаемый». Сейчас мы этого делать не станем, но запомним, что такое возможно.

### Коммит

Файл находится в Staging Area, Git его отслеживает. Теперь можно сделать первый коммит. Пока что коммиты сохраняются локально, на вашем компьютере, и доступны только вам.

Отправим коммит командой `git commit`. Ключ `-m` (от англ. message, «послание») даёт возможность добавить примечание. Оно пишется в кавычках после ключа:

Скопировать кодPOWERSHELL

`git commit -m "My first commit"
# сделали первый коммит
# текст комментария: "My first commit"` 
```
Примечания нужны, чтобы через неделю вы не мучились, вспоминая, что и зачем написали. Git понимает кириллицу, но комментировать по-английски — хороший тон. Глобализация.

Нажмите Enter — коммит будет сохранён, появится отчёт:

Скопировать кодBASH

`[master (root-commit) ab98382] My first commit
 1 files changed, 1 insertions(+), 0 deletions(-)` 

Здесь в первой строке вы видите свой комментарий “My first commit”, а перед ним, в квадратных скобках, информацию о коммите:

-   master — название ветви, в которой сделан коммит;
-   root-commit — значит, что этот коммит первый. Продолжая работу в той же папке, вы больше не увидите такого сообщения.
-   контрольная сумма, или «хеш», — уникальный идентификатор, присвоенный коммиту. В нашем примере это `ab98382`.

Ниже информация о файлах коммита:

-   изменён один файл;
-   в изменённых файлах добавлена одна строка и ни одна не удалена.

Коммиты стоит комментировать так, чтобы потом понять, какие изменения вы внесли.

### Изменение коммита

Добавляя в репозиторий новый файл, новый коммит можно не делать. Достаточно внести изменения к последнему коммиту. Для этого есть опция `--amend` (от англ. amend, «исправить»):

`git commit --amend -m "Текст вашего комментария"`

Эта команда добавит изменённые файлы в последний сделанный коммит, а с дополнительным флагом `-m` ещё и обновит комментарий:

Скопировать кодBASH

`# делаем первый коммит, в кавычках пишем комментарий
git commit -m "First commit: change program.cpp"

# добавили файлы в индекс Git
git add --all

# добавили эти файлы к предыдущему коммиту
git commit --amend -m "First commit: new files added"` 

### **Данные коммита**

Чтобы получить информацию о коммите, выполните команду `git log`:

Скопировать кодBASH
```bash 
`# команда для просмотра истории коммитов
git log
# присвоенный коммиту уникальный идентификатор
commit c952d9626e27a4d6249faf368c7d22655476365c (HEAD -> master)

# имя и почта разработчика, отправившего коммит
Author: Yandex Practicum <practicum@yandex.ru>

# дата коммита
Date:   Fri Oct 11 16:00:04 2019 +0300

# список изменённых файлов
    added readme.txt

commit a22f3328b28ab901c12a4e7a5ce8fc543a6ed991
Author: Yandex Practicum <practicum@yandex.ru>
Date:   Fri Oct 11 15:58:36 2019 +0300

    added new file` 
```
Чтобы выйти из режима просмотра, нажмите клавишу “Q”.

### Просмотр изменений

Если вы хотите увидеть не просто лог, а конкретные изменения в коммите, используйте команду `git show`. Укажите коммит, который вас интересует. Самый свежий коммит будет по указателю HEAD:
```bash
Скопировать кодBASH

`# эта команда выведет на экран последний коммит
git show HEAD 

# результат:
diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..49861b8
--- /dev/null

# показано, в каком файле произвели изменения:
+++ b/.gitignore

# номер изменённой строки
@@ -0,0 +1 @@

# добавленная строка:
+Я изучаю Git, он нужен, чтобы сохранять изменения при разработке
\ No newline at end of file` 

Полную информацию о любом коммите можно получить командой `git show 1234567`, где `1234567` — первые семь символов контрольной суммы нужного коммита. То есть первые семь символов после слова “commit” в сообщении `git log`:

Скопировать кодBASH

`# для просмотра всех коммитов
git log

commit **c952d96**26e27a4d6249faf368c7d22655476365c (HEAD -> master)
# чтобы посмотреть какие именно были изменения в коммите, 
# скопируйте первые семь символов после слова commit 
# и поставьте их после команды git show` 

Скопировать кодBASH

`# эта команда служит для просмотра изменений в коммите
git show c952d96` 

Чтобы выйти из режима просмотра, нажмите клавишу “Q”.

### Отказ от изменений
```
Git — это машина времени. Git может вернуть ваш код в любое предыдущее состояние, если оно сохранено в коммите. Для этого есть команда `git reset`.

Чтобы вернуться к определённому коммиту, используйте команду `git reset` и через пробел укажите первые семь символов контрольной суммы нужного коммита. Точно, как с командой `git show`:

Скопировать кодBASH

```bash
# смотрим список коммитов
git log 

# коммит 7639878
commit **7639878**8bf9c9aba93e4903ead47f1ee6d99976c (HEAD -> feature)
Author: Yandex Practicum <practicum@yandex.ru>
Date:   Thu Oct 25 17:13:01 2018 +0300
    Del all file # Какой-то... разработчик по ошибке удалил все файлы и закоммитил это. Молодец.

# коммит 97a25f7
commit **97a25f7**3849d758dca110bf4a70a29d6f42373ae (master)
Author: Yandex Practicum <practicum@yandex.ru>
Date:   Thu Oct 25 17:02:36 2018 +0300
    First commit: change program.cpp

# откатываемся до коммита, в котором все файлы ещё на месте
git reset 97a25f7` 

Можно откатиться на один коммит назад в определённом файле, указав его имя через HEAD:

Скопировать кодBASH

`git reset HEAD program.cpp
# откатили изменения до предыдушего коммита` 

Указатель HEAD означает последний сделанный коммит. Если не указать имя, сбросятся все изменения до состояния последнего коммита:

Скопировать кодBASH

`git reset HEAD
# откатили изменения во всех файлах до предыдущего коммита` 

```

Так можно работать с файлами в локальном репозитории на вашем компьютере. В следующем уроке вы узнаете, как создать удалённый репозиторий и поделиться своим кодом с миром.

# Регистрация на GitHub, создание и копирование репозитория

Вы изучили основы локального использования Git. Но чтобы поделиться репозиторием, нужно завести его удалённую версию. Есть несколько платформ, которые позволяют это делать. Самая популярная — GitHub. Ей мы и будем пользоваться.

GitHub — сайт для совместной разработки через Git. Это крупнейший узел потоков данных под версионным контролем. По сути GitHub — социальная сеть для разработчиков. Здесь можно завести аккаунт и хранить свой код, совместно работать над любыми open source проектами. На сервисе GitHub Pages вы можете бесплатно разместить свой сайт.

Яндекс, Facebook, Twitter, Google, Apple, Valve держат на GitHub свои официальные репозитории. Создайте свой и вы.

### Регистрация на GitHub

![image](https://pictures.s3.yandex.net/resources/screen_1_1598554556.png)

Тут всё просто: ввóдите почту, логин и пароль и попадаете в интерфейс GitHub. Сайт на английском, русскоязычной версии нет.

Выбирайте бесплатный аккаунт. Вам предложат пройти небольшой опрос. Его можно пропустить. Для этого докрутите до конца страницы и нажмите **Complete setup**.

На указанную почту вам придёт письмо со ссылкой для активации аккаунта. Когда аккаунт будет активирован, вы попадёте на форму создания первого репозитория.

### Создание репозитория на GitHub

![image](https://pictures.s3.yandex.net/resources/__2020-08-25__22.54.43_1598554576.png)

Owner — ваше имя на GitHub.

Repository name — название репозитория.

Description — описание вашего проекта. Это поле необязательно.

Public — открытый репозиторий. Любой пользователь GitHub может его увидеть.

Private (англ. «приватный») — закрытый репозиторий. Его вы сможете показывать только избранным. Например, код-ревьюерам Практикума. Для итогового проекта нужен именно этот вариант.

### README

К публичным проектам на GitHub принято добавлять инструкцию. Это нужно и для того, чтобы другие разработчики поняли, как пользоваться вашим проектом, и для трудоустройства. Инструкция хранится в README — текстовом файле в формате .md. Составить такой файл просто благодаря понятной [документации](https://gist.github.com/Jekins/2bf2d0638163f1294637) на русском языке.

### Fork

В GitHub вы можете не только создать собственный репозиторий, но и скопировать чужой — форкнуть. Для этого зайдите на страницу проекта, который хотите скопировать, и нажмите **Fork**. Копирование произойдёт на сервере GitHub. В списке ваших репозиториев появится новый. Чтобы работать с файлами репозитория, загрузите его на свой компьютер — клонируйте.

### Клонирование репозитория

Репозиторий клонируется командой `git clone`:

Скопировать кодBASH

`git clone #тут укажите url проекта в формате https://github.com/...` 

Хранилище скопируется на ваш компьютер под именем “origin”.

В следующем уроке вы узнаете, как связать локальный репозиторий с удалённым и отправлять изменения в проекте на сервер



# Отправка изменений на сервер

Вы можете связать свой удалённый репозиторий на GitHub с локальным и отправлять изменения в проектах на сервер прямо из командной строки.

### Связываем локальный и удалённый репозитории

Чтобы привязать удалённый репозиторий к локальному, используйте команду `git remote add`. Передайте ей два параметра: имя удалённого репозитория и его URL:

Скопировать кодBASH

`git remote add #тут напишите имя удалённого репозитория, а далее url https://github.com/...` 

Репозитории связаны, осталось загрузить код на GitHub. Там он будет доступен вашим коллегам-разработчикам (а в Практикуме — код-ревьюерам и наставникам).

### Отправляем на сервер

Для отправки локальных изменений на сервер GitHub выполните в Git команду:

Скопировать кодBASH

`git push` 

На сленге эту операцию называют «запу́шить».

Командная строка спросит ваше имя пользователя на GitHub. Введите его и нажмите Enter. Затем укажите пароль от GitHub и снова нажмите Enter. У пользователей Windows пароль и логин иногда вводится не в командной строке, а в открывшемся окне.

При вводе пароля вы не увидите символов на экране. Пусть это вас не пугает. Если имя пользователя и пароль введены верно, коммиты уйдут на GitHub.

Готово. Теперь ваши изменения смогут увидеть все, кто имеет доступ к репозиторию.

### Забираем с сервера

Над проектами обычно работают минимум два программиста. Представьте, что ваш коллега занимался проектом все выходные, а вы пришли в понедельник и хотите опубликовать изменения, сделанные в пятницу. Но у проекта уже новая версия. Чтобы забрать сделанные вашим коллегой изменения, есть команда `git pull` — стянуть, или «запу́лить» изменения.

Если работаете над репозиторием не в одиночку, всегда вводите `git pull` перед тем, как публиковать изменения. Пока вы писали код, кто-то мог опубликовать свои.

Git и GitHub ещё не раз облегчат вашу программистскую жизнь.